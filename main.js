(()=>{"use strict";var e={};function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.p="";var i=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._description=t.description,this._vcode=t.vcode,this._price=t.price,this._link=t.link,this._quantity=t.quantity,this._selector=i,this.handleDeleteEl=r,this._handlePriceChange=n}var i,n;return i=e,(n=[{key:"generateProd",value:function(){return this._template=document.querySelector(this._selector).content,this._element=this._template.querySelector(".cell").cloneNode(!0),this._imageElement=this._element.querySelector(".cell__image"),this._imageElement.src=this._link,this._imageElement.alt=this._name,this._titleElement=this._element.querySelector(".cell__title"),this._titleElement.textContent=this._name,this._textElement=this._element.querySelector(".cell__description"),this._textElement.textContent=this._description,this._codeElement=this._element.querySelector(".cell__code"),this._codeElement.textContent="Артикул: "+this._vcode,this._priceThingElement=this._element.querySelector(".cell__price-thing"),this._priceThingElement.textContent=this._price+" ₽/шт.",this._quantityElement=this._element.querySelector(".cell__counter-text"),this._priceElement=this._element.querySelector(".cell__price"),this._buttonReduce=this._element.querySelector(".cell__button_icon_reduce"),this._buttonAdd=this._element.querySelector(".cell__button_icon_add"),this._setFullPrice(),this._setEventListeners(),this._element}},{key:"_setFullPrice",value:function(){this._setQuantity();var e=this.getFullPrise();this._priceElement.textContent=e+" ₽"}},{key:"_setQuantity",value:function(){this._checkQuantity(),this._quantityElement.textContent=this._quantity}},{key:"_setEventListeners",value:function(){var e=this;this._buttonReduce.addEventListener("click",(function(){return e._handleReduceQuantity()})),this._element.querySelector(".cell__close").addEventListener("click",(function(){e.handleDeleteEl(e),e._removeProd()})),this._buttonAdd.addEventListener("click",(function(){return e._handleIncreaseQuantity()}))}},{key:"_handleReduceQuantity",value:function(){this._quantity=this._quantity-1,this._setFullPrice(),this._handlePriceChange("-",this._price,this._quantity),0===this._quantity&&this._removeProd()}},{key:"_handleIncreaseQuantity",value:function(){this._quantity=this._quantity+1,this._setFullPrice(),this._handlePriceChange("+",this._price,this._quantity)}},{key:"_checkQuantity",value:function(){1!==this._quantity?this._priceThingElement.classList.remove("cell__price-thing_disabled"):this._priceThingElement.classList.add("cell__price-thing_disabled")}},{key:"_removeProd",value:function(){this._element.remove(),this._element=null}},{key:"getFullPrise",value:function(){return this._price*this._quantity}},{key:"getQuantity",value:function(){return this._quantity}}])&&t(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t,i,n,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._section=document.querySelector(i),this._container=this._section.querySelector(i+"__list"),this._buttonDeleteEl=this._section.querySelector(".payment__button"),this._checboxEl=this._section.querySelector(".checkbox__input"),this._submitBtn=this._section.querySelector("#submit-btn"),this._isChecked=!1,this._fullPrice=0,this._quantityProds=0,this._setDataForm=n,this._setDataBasket=r,this._setDataPanel=s,this.handlePriceChange=this.handlePriceChange.bind(this),this.handleDeleteEl=this.handleDeleteEl.bind(this)}var t,i;return t=e,(i=[{key:"handleDeleteEl",value:function(e){var t=e.getFullPrise(),i=e.getQuantity();this._fullPrice=this._fullPrice-t,this._quantityProds=this._quantityProds-i,this.setPriceChange()}},{key:"_clear",value:function(){this._container.innerHTML="",this._fullPrice=0,this._quantityProds=0,this.setPriceChange()}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._quantityProds=t._quantityProds+e.quantity,t._fullPrice=t._fullPrice+e.quantity*e.price;var i=t._renderer(e);t._container.append(i)})),this._setEventListeners()}},{key:"handlePriceChange",value:function(e,t){this.changePrice(e,t),this.setPriceChange()}},{key:"setPriceChange",value:function(){this._setDataForm(this._fullPrice,this._quantityProds,this._isChecked),this._setDataBasket(this._fullPrice,this._quantityProds),this._setDataPanel(this._quantityProds)}},{key:"changePrice",value:function(e,t){switch(e){case"-":this._fullPrice=this._fullPrice-t,this._quantityProds=this._quantityProds-1;break;case"+":this._fullPrice=this._fullPrice+t,this._quantityProds=this._quantityProds+1}}},{key:"_handlerClickCheckbox",value:function(e){this._isChecked=e.target.checked,this.setPriceChange()}},{key:"_setEventListeners",value:function(){var e=this;this._checboxEl.addEventListener("click",(function(t){return e._handlerClickCheckbox(t)})),this._buttonDeleteEl.addEventListener("click",(function(){return e._clear()})),this._submitBtn.addEventListener("click",(function(){return e._handleSubmitClick()}))}},{key:"_handleSubmitClick",value:function(){var e=this._container.querySelectorAll(".cell"),t=[];e.forEach((function(e,i){var n={};n.name=e.querySelector(".cell__title").textContent,n.descriptions=e.querySelector(".cell__description").textContent,n.vcode=e.querySelector(".cell__code").textContent,n.quantity=e.querySelector(".cell__counter-text").textContent,t[i]=n})),console.log(t)}}])&&n(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=document.querySelector(t),this._fullPriceEl=this._form.querySelector(t+"__bottom-text"),this._priseProdsEl=this._form.querySelector("#price"),this._quantityProdsEl=this._form.querySelector("#quantity"),this._installEl=this._form.querySelector("#help"),this.setDataForm=this.setDataForm.bind(this)}var t,i;return t=e,(i=[{key:"setDataForm",value:function(e,t,i){this._fullPriceEl.textContent=e+" ₽",this._priseProdsEl.textContent=e+" ₽",this._quantityProdsEl.textContent=t+" шт",this._installEl.textContent=i?"Да":"Нет"}}])&&s(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._basket=document.querySelector(t),this._priseProdsEl=this._basket.querySelector("#basket-price"),this._quantityProdsEl=this._basket.querySelector("#basket-quantity"),this.setDataBasket=this.setDataBasket.bind(this)}var t,i;return t=e,(i=[{key:"setDataBasket",value:function(e,t){this._priseProdsEl.textContent=e+" ₽",this._quantityProdsEl.textContent=t+" товара"}}])&&a(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._panel=document.querySelector(t),this._quantityProdsEl=this._panel.querySelector(".payment__text"),this.setDataPanel=this.setDataPanel.bind(this)}var t,i;return t=e,(i=[{key:"setDataPanel",value:function(e){this._quantityProdsEl.textContent=e+" товара"}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._swiper=i,this._counter=1,this._sliderEl=document.querySelector(t),this._nextBtn=this._sliderEl.querySelector(t+"__button_icon_next"),this._prevBtn=this._sliderEl.querySelector(t+"__button_icon_prev"),this._currPageEl=this._sliderEl.querySelector(t+"__current-page")}var t,i;return t=e,(i=[{key:"setEventListeners",value:function(){var e=this;this._nextBtn.addEventListener("click",(function(){return e._handleClickNextSlide()})),this._prevBtn.addEventListener("click",(function(){return e._handleClickPrevSlide()}))}},{key:"_handleClickNextSlide",value:function(){6!==this._counter&&(this._swiper.slideNext(),this._counter=this._counter+1,this._setCurrentPage())}},{key:"_handleClickPrevSlide",value:function(){1!==this._counter&&(this._swiper.slidePrev(),this._counter=this._counter-1,this._setCurrentPage())}},{key:"_setCurrentPage",value:function(){this._currPageEl.textContent=this._counter}}])&&h(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();const y=e.p+"24026ffea47fb08fc0f3.jpg",d=e.p+"5f842cd1869c0d846d89.jpg";var f=[{name:"Вытяжное устройство G2H",description:"12-72/168 м3/ч / гидрорегулируемый расход / от датчика присутствия",vcode:"G2H1065",price:10644,link:y,quantity:1},{name:"Вытяжное устройство BHC",description:"12-72/168 м3/ч / гидрорегулируемый расход / от датчика присутствия",vcode:"G2H1065",price:12644,link:e.p+"2414764f15aa2686a3ab.jpg",quantity:3},{name:"Вытяжное устройство GHN",description:"12-72/168 м3/ч / гидрорегулируемый расход / от датчика присутствия",vcode:"G2H1065",price:16646,link:d,quantity:2}],p=new u(".payment__top-panel"),v=new c(".basket"),m=new r((function(e){return new i(e,".template-cell",m.handlePriceChange,m.handleDeleteEl).generateProd()}),".payment",new l(".result").setDataForm,v.setDataBasket,p.setDataPanel);m.renderItems(f),m.setPriceChange(),new _(".slider",new Swiper(".swiper")).setEventListeners()})();